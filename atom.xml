<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Hatofmonkeys]]></title>
  <link href="http://blog.hatofmonkeys.com/atom.xml" rel="self"/>
  <link href="http://blog.hatofmonkeys.com/"/>
  <updated>2014-12-26T08:50:23+00:00</updated>
  <id>http://blog.hatofmonkeys.com/</id>
  <author>
    <name><![CDATA[Colin Humphreys]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Cloud Foundry Summit 2014]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2014/12/26/cloud-foundry-summit-2014/"/>
    <updated>2014-12-26T08:39:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2014/12/26/cloud-foundry-summit-2014</id>
    <content type="html"><![CDATA[<h2>26th December, Blog #2</h2>

<p>I wrote this blog back in June but didn&rsquo;t have time to publish it. No time like the present.</p>

<h2>Cloud Foundry Summit 2014</h2>

<p>Now the dust has settled following the CF Summit I thought it a good time to note some of the lasting impressions.</p>

<p>CF Summit was a great conference. The buzz and energy around the place was tangible. This year&rsquo;s host, Andrew Clay Shafer, gave the event a friendly, personable feel, and also has(had) great hair. The big hitters from the Cloud Foundry community were present, along with a newer users from a diverse range of organisations.</p>

<p>Personally, I felt the Summit represented the emergence of Cloud Foundry as the leading enterprise PaaS. I backed Cloud Foundry from day one, and I&rsquo;ve been vocal about the <a href="http://blog.hatofmonkeys.com/blog/2013/06/30/when-to-pass-on-a-paas/">shortcomings of other PaaSes that fall short of CF</a>. Witnessing some of the biggest names in tech queuing up to take the stage to endorse Cloud Foundry was immensely gratifying. The corollary to those endorsements was the quantity of real world Cloud Foundry success stories in the talks; Cloud Foundry has broken through, and proven its worth.</p>

<p>One of the chief reasons for the dramatic rise in enterprise adoption of Cloud Foundry has been the <a href="http://www.cloudcredo.com/cloudcredo-joins-the-cloud-foundry-foundation/">formation of the CF Foundation</a>. The Foundation members were well represented at CF Summit, from small innovators such as CloudCredo, to tech giants such as IBM and Cisco. It&rsquo;s fantastic to see the Cloud Foundry ecosystem crystallise as a Foundation to move the project forward.</p>

<p>The noticeable trend amongst the Summit attendees was big businesses realising the importance of speed. Canopy are shining example of this; formed from large enterprises but able to quickly and effectively <a href="http://canopy-cloud.com/">make use of outstanding new technologies</a>. I fear for their competition; it&rsquo;s striking when organisations decisively deliver capability at this scale.</p>

<p>We were overjoyed with the Summit from a CloudCredo perspective. The ecosystem&rsquo;s response to our work with them was fantastic. We are proud our work was mentioned in the following talks:</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=hy_huSXghI8">Ben Hale&rsquo;s Buildpack Talk</a></li>
<li><a href="https://www.youtube.com/watch?v=eQhRl9GYGpQ">Warner Music</a></li>
<li><a href="https://www.youtube.com/watch?v=YMNt6Gn3yaI">Canopy</a></li>
<li><a href="https://www.youtube.com/watch?v=2e0XgGevKhg">Cisco</a></li>
<li>James Bayer &ndash; Cloud Foundry Roadmap</li>
<li>Tammer Saleh and Chris Brown &ndash; Cloud Foundry Data Services</li>
<li><a href="https://www.youtube.com/watch?v=nmapwrs2M9c">Ferdy&rsquo;s BOSH/Docker talk</a></li>
<li><a href="https://www.youtube.com/watch?v=IP0fpP_Nl4I">My Decker talk</a></li>
</ul>


<p>We&rsquo;d love to be able to add your organisation&rsquo;s name to that list. Please <a href="http://www.cloudcredo.com/contact-us/">get in contact</a> to talk about how we can help you deliver with Cloud Foundry.</p>

<p><a href="https://www.youtube.com/watch?v=8CFESsXwntk">Christmas Garage!</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Twelve Blogs of Christmas]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/"/>
    <updated>2014-12-25T12:19:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas</id>
    <content type="html"><![CDATA[<h2>25th December, Blog #1</h2>

<h3>Twelve blogs, twelve days</h3>

<p>I&rsquo;ve got a backlog of half-formed blog posts (backblog?) that have been hanging around, like bad smells, for a while. I&rsquo;ve decided to get them all done and out over Christmas. I&rsquo;m cheating by imposing the following restrictions:</p>

<ul>
<li>This is the first blog and counts as a blog post even though it&rsquo;s a meta-post</li>
<li>I reserve the right to post days, or even weeks, late. I&rsquo;m in <a href="http://en.wikipedia.org/wiki/Sark">Sark</a> for some of Christmas and I will be burned alive in a <a href="http://en.wikipedia.org/wiki/The_Wicker_Man_%281973_film%29">wicker man</a> if I&rsquo;m seen using a laptop</li>
<li>I reserve the right to post nonsense due to Christmas-related alcohol abuse</li>
<li>I reserve the right to blame alcohol for nonsense I&rsquo;ve posted while sober</li>
<li>I have about eight posts lined up, most of which are nonsense</li>
<li>The remaining three posts are TBC and are guaranteed to be nonsense</li>
<li>I reserve the right to edit/delete all blogs at a later date once I realise how nonsensical they are</li>
</ul>


<h3>Random asides</h3>

<p>I&rsquo;ve noticed the vast majority of my traffic is from the USA. As part of my single-handed mission to bring back UK Garage, and further its influence in the world, I will be linking to some of the UKG greats at the end of each blog post.</p>

<p><a href="https://www.youtube.com/watch?v=vEtWdI9FByA">Bo selecta!</a></p>

<p>Let the blogging commence!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Docker, Investors, and Ecosystems]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2014/12/03/docker/"/>
    <updated>2014-12-03T09:13:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2014/12/03/docker</id>
    <content type="html"><![CDATA[<h3>Rocket</h3>

<p>As you&rsquo;re probably aware by now &ndash; CoreOS have released a new container runtime called &lsquo;<a href="https://coreos.com/blog/rocket/">Rocket</a>&rsquo;. Rocket will inevitably be perceived as a reaction, and competitor, to Docker. The language in CoreOS&rsquo;s Rocket blog post suggests Docker have deviated from CoreOS&rsquo;s preferred path, and the tone suggests an accusation of betrayal. The timing of CoreOS&rsquo;s announcement, the week before DockerCon EU, implies a deliberate attempt to undermine Docker&rsquo;s marketing.</p>

<h3>Reaction</h3>

<p>GigaOM have published a great summary of the community&rsquo;s reaction <a href="https://gigaom.com/2014/12/02/why-coreos-just-fired-a-rocket-at-docker/">here</a>. Given Docker&rsquo;s amazing ecosystem and adoption levels I&rsquo;m actually quite surprised more people haven&rsquo;t come out in strong support of Docker. Solomon Hykes has exactly three things to say (followed by a subsequent thirteen) <a href="https://news.ycombinator.com/item?id=8682525">here</a>.</p>

<h3>The Changing Docker</h3>

<p>I spoke at <a href="http://blog.docker.com/2014/07/dockercon-video/">DockerCon 2014 about the Cloud Foundry/Docker integration</a> project I&rsquo;d been working on. This work has now been subsumed into the <a href="https://www.youtube.com/watch?v=e76a50ZgzxM">Docker on Diego</a> work which is beginning to form the core of Cloud Foundry V3. While working on the initial proof of concept I had regular communication with the people at Docker. I found them friendly and open to the idea of using Docker containers as another deployable unit within Cloud Foundry.</p>

<p>Once Docker <a href="http://thenewstack.io/docker-sets-sights-on-enterprises-with-40-million-investment/">raised their $40M investment</a> the tone changed. Docker became a &lsquo;<a href="https://www.docker.com/whatisdocker/">platform</a>&rsquo;. Docker&rsquo;s collaboration with Cloud Foundry, to use Docker inside Cloud Foundry, <a href="https://docs.google.com/document/d/1IBfDDnn_Kr0_P8iUubHX3RdvGxQ9isXczhjLW3pMZiM/pub">seemed to stall</a>. It appeared Docker were trying to eat their ecosystem. Was investor pressure for a huge return causing Docker to try to capture too many markets rather than focusing on their core?</p>

<h3>Cloud Foundry Future</h3>

<p>Cloud Foundry will continue to orchestrate various units of currency; applications via buildpacks, containers via Docker, and potentially containers via Rocket. My company, <a href="http://www.cloudcredo.com/">CloudCredo</a>, is already looking at what a Rocket integration with Cloud Foundry would look like. <code>cf push https://storage-mirror.example.com/webapp-1.0.0.aci</code> is on the way.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Configuration Management isn't Stupid, but it Should Be]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2014/03/15/configuration-management-isnt-stupid/"/>
    <updated>2014-03-15T10:37:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2014/03/15/configuration-management-isnt-stupid</id>
    <content type="html"><![CDATA[<p>Devops is about holistic, systems-orientated thinking; it&rsquo;s been misappropriated to be about configuration management. I&rsquo;ve noticed a decline in the number of people from a development background at Devops conferences &ndash; maybe they&rsquo;ve lost interest in talking about Puppet vs Chef vs Salt vs Ansible vs CFEngine vs X vs Y vs Z?</p>

<h3>Bricks</h3>

<p>The role of infrastructure should be to provide reliable, consumable bricks to enable innovation at higher levels. If we create beautiful, unique, novel bricks it becomes impossible to build houses. This is a problem I see regularly with OpenStack deployments; they&rsquo;re amazing, wonderful, unique, organic. I cannot, however, easily deploy platforms to them.</p>

<h3>Configuration Management</h3>

<p>This issue manifests itself in deployments orchestrated by configuration management.</p>

<ul>
<li>Complexity &ndash; you can do some amazing things in Chef as you have the power and flexibility to run arbitrary Ruby during your deployments. I have seen this abused many times &ndash; and done this myself. Too much clever branching logic and too little reliable code</li>
<li>Determinism &ndash; configuration management tools often provide a thin veneer over non-deterministic operating system commands</li>
<li>Reproducibility &ndash; server scaling operations often fail due to poor dependency management and non-deterministic actions</li>
</ul>


<p>Configuration management is too focused on innovation at the server level rather than thinking about the entire system. Devops has become a silo.</p>

<h3>A Better Way</h3>

<p>There are some tools and patterns emerging to tackle these problems.</p>

<ul>
<li><a href="http://foodfightshow.org/2013/07/immutable-infrastructure.html">Immutable infrastructure</a> &ndash; remove the drift</li>
<li><a href="https://www.docker.io/">Docker</a>/<a href="https://www.youtube.com/watch?v=QslNszh3jfY">Decker</a> &ndash; testable, simple, small, disposable containers</li>
<li><a href="http://nixos.org/nix/">Nix</a> &ndash; declarative, deterministic package management</li>
<li><a href="https://github.com/cloudius-systems/osv">OSV</a> &ndash; stupid(brilliant) operating system to enable innovation</li>
<li><a href="http://bosh.cfapps.io/">BOSH</a> &ndash; stupid(brilliant) tool to deploy complex distributed systems</li>
<li><a href="http://mesos.apache.org/">Mesos</a> &ndash; schedule commands(jobs) to run in a distributed environment</li>
</ul>


<h3>&lsquo;Infrastructure as Code&rsquo; to &lsquo;Infrastructure as Good Code&rsquo;</h3>

<p>We need <a href="http://www.codeproject.com/Articles/60845/The-S-O-L-I-D-Object-Oriented-Programming-OOP-Prin">SOLID</a> for infrastructure. We need to develop standardised, commoditised, loosely coupled, single-responsibility components from which we can build higher-order systems and services. Only then will we be enabling innovation higher up the value chain.</p>

<p>Devops should be about enabling the business to deliver effectively. We&rsquo;ve got stuck up our own <del>arses</del> configuration management.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[When to Pass on a PaaS]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2013/06/30/when-to-pass-on-a-paas/"/>
    <updated>2013-06-30T18:04:00+01:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2013/06/30/when-to-pass-on-a-paas</id>
    <content type="html"><![CDATA[<p>There&rsquo;s no point pretending I don&rsquo;t love &lsquo;The PaaS&rsquo;. I do. I have spent too much of my career fighting battles I shouldn&rsquo;t be fighting; re-inventing similar-looking systems time and time again. The idea I could just drop an application into a flexible platform and expect it to run, without consuming my entire life for the preceeding three months writing Chef cookbooks and wrestling EC2, sounds fantastic.</p>

<h3>Cloud Foundry</h3>

<p>Having played with Heroku, and being dismayed at not being able to play with my own Heroku, I was overjoyed when VMWare released Cloud Foundry. I created a Vagrant box on the Cloud Foundry release day and began distributing it to clients. I worked with one of my clients at the time, OpenCredo, to develop and deploy one of their new services to a Cloud Foundry installation I created. I believe this was the first SLA-led production deployment of Cloud Foundry globally.</p>

<p>I spoke about the rationale behind running/developing your own PaaS at QCon London 2012. I also discussed some of the use cases I&rsquo;d fulfilled using PaaS, including OpenCredo&rsquo;s.</p>

<p><a href="http://www.infoq.com/presentations/Lessons-Learned-in-Deploying-PaaS">QCon 2012 &ndash; Lessons Learned Deploying PaaS</a></p>

<h3>OpenShift</h3>

<p>I was similarly happy when I heard RedHat had bought Makara, a product I&rsquo;d briefly experimented with, and were looking at producing their own PaaS. I&rsquo;ve used RedHat-based systems for many years with great success, have always found <a href="http://blog.hatofmonkeys.com/blog/2012/01/15/system-build-reproducibility/">YUM/RPM great to use</a>, and was apparently the 7th person in the UK to achieve RedHat Architect status. A RedHat-delivered PaaS would surely be the panacea for all my problems.</p>

<p>I was scoping a large project at this time with availability as a prime concern. It occurred to me that I could use two turnkey PaaSes simultaneously, Cloud Foundry and OpenShift, such that if there was an issue with either I could simply direct all traffic to the other PaaS. I discussed the deployment and progress at DevopsDays.</p>

<p><a href="http://new.livestream.com/devopsdaysorg/devopsdaysRome/videos/4516372">DevopsDays Rome 2012 &ndash; How I Learned to Stop Worrying and Love the PaaS</a> &ndash; I start about 32 minutes in.</p>

<h3>From Dream to Reality</h3>

<p>Unfortunately, the project didn&rsquo;t quite work out as planned. We had a number of issues with OpenShift which meant we had no choice but to withdraw it from production usage. Scalability was an enormous problem; bringing an application to production scale was a sub-twenty second operation in Cloud Foundry; it took fourty-eight hours plus in OpenShift. We had to write our own deployment and orchestration layer for OpenShift based on Chef and shell &ndash; Cloud Foundry has the fantastic BOSH tool enabling deployment, scaling, and upgrades. These reasons, alongside some nasty bugs and outages, meant we were unable to use OpenShift for our deployment.</p>

<p>Beyond this I feel OpenShift, like many &lsquo;PaaSish&rsquo; systems, has got the focus wrong. There seems to be a plethora of container-orchestration systems being produced at the moment, which are really just a slight re-focus on the IaaS abstraction layer. OpenShift is in danger of falling into this trap. PaaS needs to remain focussed on the application as the unit of currency, and not the container or virtual machine. It looks entirely possible (and would make an interesting project) to run Cloud Foundry inside OpenShift, illustrating the conceptual difference.</p>

<p>We settled on using distributed Cloud Foundry instances across diverse IaaS providers to deliver the project; it was a great success. I blogged about it for Cloud Foundry&rsquo;s blog.</p>

<p><a href="http://blog.cloudfoundry.com/2013/04/30/uk-charity-raises-record-donations-powered-by-cloud-foundry/">CloudFoundry.com blog post &ndash; UK Charity Raises Record Donations Powered by Cloud Foundry</a></p>

<h3>Which PaaS?</h3>

<p>I&rsquo;ve remained supportive of RedHat&rsquo;s efforts to deliver a PaaS solution but fear they&rsquo;re not quite there yet. I organised a <a href="http://www.meetup.com/London-PaaS-User-Group-LOPUG/events/120336492/">London PaaS User Group meetup  to help RedHat to put their side of the case across to the London community</a>. It sounded like they had some exciting developments in the pipeline but even with the new features it&rsquo;s likely we would have been unable to deliver the enterprise-grade services our project required.</p>

<p>Perhaps Redhat&rsquo;s customer base are largely systems administrators rather than developers. Perhaps Redhat have more experience at deploying and managing servers than applications. For whatever reason, I think it would be a denigration of PaaS to allow it to be misconstrued as container-based IaaS. Containers can be a by-product of service provision but should not be the focus of PaaS.</p>

<p>Cloud Foundry isn&rsquo;t perfect but, at the moment, is the only PaaS product I&rsquo;d recommend to anyone looking to make a long-term investment.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[System Build Reproducibility]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2012/01/15/system-build-reproducibility/"/>
    <updated>2012-01-15T09:59:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2012/01/15/system-build-reproducibility</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been on the receiving end of build reproducibility rants from <a href="http://www.freakingnews.com/pictures/34500/Cyclops-Teletubbies-34621.jpg">developers</a> at plenty of conferences. Their bile is usually aimed at <a href="http://maven.apache.org/general.html#snapshot-artifacts">Maven&rsquo;s snapshot functionality</a>. I&rsquo;ve often questioned how reproducible their systems are; I&rsquo;m usually met by a blank look.</p>

<p>I&rsquo;ve always aimed to make system builds reproducible, but with little success. Gem, pear, pecl, rpm, license agreements, configure/make/make install: they all take their toll. This can lead to inconsistent builds between environments &ndash; or even in a single tier &ndash; due to scaling up/down.</p>

<p>As I&rsquo;ve tended to use RPM-based systems (<a href="http://www.redhat.com/certification/rhca/">misspent youth</a>), I&rsquo;ve attempted, wherever possible, to get all non-configuration files on a server into RPMs. I&rsquo;ve been more promiscuous with configuration management, moving from home grown, to <a href="http://cfengine.com/">Cfengine</a>, via <a href="http://puppetlabs.com/">Puppet</a>, to <a href="http://www.opscode.com/chef/">Chef</a>. I&rsquo;m currently using chef-solo, with tooling such as <a href="https://github.com/lusis/Noah">Noah</a> and <a href="http://puppetlabs.com/mcollective/">MCollective</a> for orchestration. Don&rsquo;t even mention the number of deployment/ALM tooling solutions I&rsquo;ve been through(although <a href="https://github.com/capistrano/capistrano/wiki">Capistrano</a> has never annoyed me to any great extent).</p>

<p>Even with long term usage of RPMs, build reproducibility has been far from simple. <a href="http://www.redhat.com/red_hat_network/">RH Satellite</a>/<a href="http://spacewalk.redhat.com/">Spacewalk</a> should make this easy, but unfortunately it&rsquo;s a bloated mess. I&rsquo;ve usually resorted to simple apache/createrepo, but this poses its own problems. Do you have a repo per environment? How do you track which servers were built against which repo? How do you roll out updates in a manageable fashion?</p>

<p>I&rsquo;ve created a simple setup called <a href="https://github.com/hatofmonkeys/yumtags">Yumtags!</a> to address some of these issues. The basic idea is that you can drop RPMs in to a directory, and then &ldquo;freeze&rdquo; the directory at that point in time by creating and storing repository metadata against a tag. This tag can then be used, perhaps in a chef-solo-driven repository definition, to update, build, and reproduce systems in a known state. It currently features simple JSON-driven integration for CI systems, so RPM-based integration pipelines can be easily automated. There&rsquo;s a million and one things missing from it, but now it does the basic story I&rsquo;ve shared it for others to hack on.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monitoring-Driven Operations]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2012/01/15/monitoring-driven-operations/"/>
    <updated>2012-01-15T08:11:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2012/01/15/monitoring-driven-operations</id>
    <content type="html"><![CDATA[<p><strong>RAMBLING BLOG POST ALERT</strong></p>

<p>Monitoring sucks.</p>

<p>Following the &ldquo;if it hurts, do it more often&rdquo; mantra that has driven the success of patterns such as <a href="http://continuousdelivery.com/">Continuous Delivery</a>, there might be some value in jumping head-first into the world of monitoring.</p>

<p>I&rsquo;ve been <a href="http://www.eatliver.com/img/2005/638.jpg">evangelising</a> to anyone that will listen, and a lot of people that won&rsquo;t, about declarative/convergent frameworks for some time now. Sometimes you have to describe how to converge (definitions may not yet exist), so I particularly enjoy working with frameworks such as <a href="http://wiki.opscode.com/display/chef/Home">Chef</a> that enable you to easily move from declarative to imperative as the need arises.</p>

<p>These two trains of thought(monitoring + system convergence) collided a while back to make me think about Monitoring-Driven Operations, i.e. that we can declare the status of the monitoring systems (that servers and services are available during expected hours) and converge the environment(s) on this desired state if there&rsquo;s a gap between observed and desired states. MDO for operations, TDD for developers.</p>

<p>It turned out I <a href="http://dev.hubspot.com/bid/65871/Monitoring-Driven-DevOps">wasn&rsquo;t alone</a> in thinking about monitoring from this perspective.</p>

<p>Reusing the application behaviours in production is a natural, logical extension of <a href="blog/2011/11/13/the-testing-pipeline/">the testing pipeline</a>. Were we able to ensure that the <a href="blog/2012/01/15/bridging-the-gap-between-functional-and-non-functional/">behaviours include non-functional requirements</a>, would it be possible to use these monitored behaviours to converge an environment towards a state that passes all scenarios?</p>

<p>The missing link here is the imperative element. We can declare the desired state for an environment (<a href="http://auxesis.github.com/cucumber-nagios/">cucumber-nagios</a> is a good start), however we need a framework to express <em>how we get there</em>. I think Chef/Puppet can help with a lot of the hard labour here, but I don&rsquo;t think that either, in their current formats, are appropriate to converge a service from a failed monitoring check.</p>

<p><a href="https://github.com/cloudfoundry/">Cloud Foundry</a>(brilliant) uses a health manager, message bus, and cloud controller interacting to accomplish something similar. In this situation the cloud controller knows how to converge the state of the environment when the health manager observes a disparity between observed and desired states.</p>

<p>I&rsquo;m thinking about developing a system that works in the following way(&ldquo;<em>The Escalator</em>&rdquo;). Please get in contact if you&rsquo;ve got any feedback.</p>

<ul>
<li>Barry McDevops declares an escalation pattern for his environments. These are the <em>levels</em> of escalation for convergence that failing checks can be matched to. As a crude example:

<ol>
<li> Create account with IaaS provider</li>
<li> Create core networking and support infrastructure</li>
<li> Create tier networking and all VMs</li>
<li> Create an individual VM</li>
<li> Converge VM with Chef</li>
<li> (Re)deploy application</li>
</ol>
</li>
<li>Barry creates a series of monitoring <em>checks</em> for the non-functional requirements

<ol>
<li> IaaS provider is online</li>
<li> (per node) ICMP ping reply</li>
<li> (per node) app and DB services are online</li>
<li> (per tier) app and DB services are online</li>
<li> Smoke check of application</li>
</ol>
</li>
<li>Barry maps each monitoring <em>check</em> to an escalation <em>level</em>

<ul>
<li>Check 1 => Level 1</li>
<li>Check 2 => Level 4</li>
<li>Check 3 => Level 5</li>
<li>Check 4 => Level 3</li>
<li>Check 5 => Level 6</li>
</ul>
</li>
<li>Once engaged, the monitoring system will quiesce for 30 seconds, observe the highest level of required escalation, and then ask the escalation system to take that level of action (and all levels below it).</li>
</ul>


<p>As examples:
&ndash; If there is nothing in place (failed IaaS provider or a new system) &ndash; an entire new environment is built from scratch (escalation steps 1 through 6).
&ndash; If a node fails: a new node is built, converged, and deployed to (steps 4 through 6).
&ndash; If the application fails the smoke test, the application is redeployed (step 6).</p>

<p>Obviously it is up to Barry to ensure his escalation steps are sensible, i.e. use multiple IaaS providers, redeploy previous versions of applications if they persistently fail smoke tests. Each escalation step should declare a quiescence period, during which no further actions will be taken. There&rsquo;s no point attempting to deploy an application if you have no nodes.</p>

<p>If an escalation process fails, the monitoring system could attempt a re-convergence if necessary or contact an administrator.</p>

<p>This overlaps significantly with a couple of discussions: <a href="http://wiki.opscode.com/display/chef/Cluster+Orchestration">here</a> and <a href="http://wiki.opscode.com/display/chef/Management+of+External+Entitites">here</a> at the recent <a href="http://wiki.opscode.com/display/chef/Opscode+Community+Summit+1">Opscode Community Summit</a>, so perhaps someone else is already creating something similar with Chef.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bridging the Gap Between Functional and Non-Functional]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2012/01/15/bridging-the-gap-between-functional-and-non-functional/"/>
    <updated>2012-01-15T07:54:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2012/01/15/bridging-the-gap-between-functional-and-non-functional</id>
    <content type="html"><![CDATA[<p>According to the <a href="http://agilemanifesto.org/principles.html">principles behind the Agile Manifesto</a></p>

<blockquote><p>Our highest priority is to satisfy the customer through early and continuous delivery of valuable software.</p></blockquote>

<p>As I&rsquo;m from an <a href="http://cache.blippitt.com/wp-content/uploads/2011/03/Mushroom-Cloud.jpg">operations</a> background, I&rsquo;ve always had great trouble communicating with the customer over requirements that have been relevant to my domain. The usual situation is that the &ldquo;customer&rdquo;, often the product owner, views the working i.e. functionally complete software on a developer&rsquo;s machine, but bringing this to an operational service level is an afterthought (until it goes offline, and the real customers start complaining).</p>

<p>Traditionally, capturing these specifications has fallen under the umbrella of &ldquo;non-functional requirements&rdquo;. As <a href="https://twitter.com/tomsulston">Tom Sulston</a> pointed out to me, this suggests requirements that <a href="http://cache.blippitt.com/wp-content/uploads/2011/03/Mushroom-Cloud.jpg">aren&rsquo;t working</a>, which is precisely the opposite of what we&rsquo;re attempting to express.</p>

<p>I&rsquo;ve sought to tackle this in a couple of ways.</p>

<ol>
<li><p>Spread FUD throughout the non-technical customer base.</p>

<ul>
<li>&ldquo;Do you want it to explode?&rdquo;</li>
<li>&ldquo;NO!&rdquo;</li>
<li>&ldquo;Well you should ask for non-exploding software in your stories then!&rdquo;.</li>
</ul>
</li>
<li><p>Get the team in a room together and express &ldquo;cross-cutting concerns&rdquo; (I <a href="http://www.cockneyrhymingslang.co.uk/slang/half_inch">half-inched</a> the idea from <a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a>) that span the project as a whole.</p></li>
</ol>


<p>I haven&rsquo;t been happy with the results of either approach, so I&rsquo;d be interested to talk to anyone with a satisfactory solution in this space.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Continuous Deployment - A Vanity Metric?]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2012/01/15/continuous-deployment-a-vanity-metric/"/>
    <updated>2012-01-15T07:12:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2012/01/15/continuous-deployment-a-vanity-metric</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve recently seen a few articles/presentations carrying the claim &ldquo;481,000 deployments a day!&rdquo;, &ldquo;Deployment every 3 seconds!&rdquo;, or &ldquo;We deploy more frequently than we breathe &ndash; or we sack the junior ops guy!&rdquo;. Very exciting.</p>

<p>Having the capability to deploy frequently is important for a variety of reasons; fast feedback, quickly realising value, reducing risk deltas, increasing confidence, and so on. However, I also think that frequent deployment is useless without making use of that feedback.</p>

<p>Continuous Deployment is an enabler of fast feedback, but it&rsquo;s not the end goal. If the feedback isn&rsquo;t utilised by product owners to inform their decisions, there&rsquo;s little point in creating it. The practice becomes a local optimisation.</p>

<p>I&rsquo;ve deliberately chosen to differentiate Continuous Delivery from Continuous Deployment here, as I believe Continuous Delivery implies that <a href="blog/2011/11/06/automating-value/">value</a> is being delivered, whereas Continuous Deployment suggests focusing on deploying frequently.</p>

<p>We need to optimise cycle time for the whole business, not just the dev/ops/devops/&lt;current silo label> team.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Testing Pipeline]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2011/11/13/the-testing-pipeline/"/>
    <updated>2011-11-13T11:11:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2011/11/13/the-testing-pipeline</id>
    <content type="html"><![CDATA[<p>I was fortunate in being able to attend <a href="http://citconf.com/london2011/">Citcon</a> this weekend and met some wonderful, talented people. I proposed a couple of openspaces, one loosely based on <a href="blog/2011/11/06/automating-value/">automating value</a> and the other around test reuse.</p>

<p>I&rsquo;ve been thinking for a while about how I see people (including myself) rewrite the same business logic in our behavioural specifications, for our integration tests, for our performance tests, for our security tests, and for our behaviour-driven monitoring. This seems counter-intuitive to someone as lazy as I am.</p>

<p>I think we should reconsider the deployment pipeline as a testing pipeline. The purpose of the pipeline is to increase confidence in the release candidate as the stages are passed. These stages can be considered as hoops for the release candidates to jump through. As new functionality is added, so the hoops will need to be tailored to ensure the new functionality is fit for purpose.</p>

<p>Here&rsquo;s an idea of a delivery pipeline I&rsquo;ve seen used many times before. It&rsquo;s in no way ideal, nor suitable for every use case, but it provides an example for discussion:</p>

<p>Behaviours(product owner) &ndash;> unit(dev) &ndash;> <strong>code</strong>(dev) &ndash;> VCS &ndash;> unit tests(CI) &ndash;> behavioural tests(UAT) &ndash;> load tests(staging) &ndash;> security tests(staging) &ndash;> monitoring(production)</p>

<p>The issue I&rsquo;m attempting to highlight is that as desired functionality is added by the product owner (typically as a feature in the backlog) and committed to a release candidate by the developer, so the hoops need to ensure that the new functionality is delivered as specified, and no regression bugs have been introduced. This typically involves either the new functionality going untested through load/security/monitoring, or a developer/operations person having to rewrite the new business logic repeatedly in the DSLs of whichever tools are used to create the hoops.</p>

<p>I&rsquo;m currently using <a href="http://auxesis.github.com/cucumber-nagios/">cucumber-nagios</a> to reuse our functional behaviours for monitoring and I&rsquo;ve also had some success using <a href="http://www.pushtotest.com/">PushToTest</a> with Selenium from Cucumber. I&rsquo;ve yet to look at how to tackle security requirements. Please get in contact with me if you&rsquo;ve had any success reusing your business logic assertions throughout your pipeline; I&rsquo;d be very interested to hear about your experiences.</p>

<p>My (current) vision would be that, either as a part of or along with a release candidate, an artefact is created that outlines the business value assertions made about the candidate. As the candidate then moves through the pipeline, so the hoops are updated with the relevant assertions they need to test about the candidate. These could be a certain number of virtual users through the user journeys in the expected ratios, lack of injection holes in the application, the application&rsquo;s ability to degrade gracefully through various failure modes, and anything else that&rsquo;s required to establish confidence in the release candidate.</p>

<p>You should be able to make an API call to cloud-based testing providers(such as <a href="http://www.soasta.com/">Soasta</a>) so they can use your artefact to automatically test the behaviour of your application, such as external load and security tests. The feedback from these providers can be returned to your CI server for tracking over time, and form a basis for diagnosis of any assertion failures.</p>

<p>Without a fully-automated testing pipeline, I see one of two outcomes regularly at the moment:</p>

<ul>
<li>New functionality is not tested before release. This implies risk.</li>
<li>Releases are delayed while scripts are updated, and manual load/security tests booked with vendors and executed. This inhibits business agility and delays feedback cycles.</li>
</ul>


<p>I&rsquo;m attempting to write an abstraction layer for Cucumber scenarios to be reused in load tests, if you&rsquo;re interested in helping please get in touch. I&rsquo;ll post it on the <a href="https://github.com/hatofmonkeys">Githubs</a> once I&rsquo;ve got something small working.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Automating Value]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2011/11/06/automating-value/"/>
    <updated>2011-11-06T13:26:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2011/11/06/automating-value</id>
    <content type="html"><![CDATA[<p>I’ve always(well, for longer than my attention span) been a massive fan of outside-in development via BDD, in particular <a href="http://cukes.info">Cucumber</a>. Despite this affection I’ve thought it a little unusual that BDD frameworks ignore/discard the business value proposition stated at the beginning of a feature. It’s always felt like we’re saying “that’s too difficult to do anything useful with, we’ll leave that to the business idiots”. With that in mind, and being a business idiot, I’m going to attempt to construct a model for value and automate the testing of business-based assertions.</p>

<p>What I’m really trying to achieve is to extend the automated feedback cycle back into the business. The sooner the decision makers gain meaningful feedback about the impact of their decisions, the sooner they can start making useful decisions (and fewer useless ones).</p>

<p>I think this is where the devops camp needs to join forces with the <a href="http://www.amazon.com/Lean-Startup-Entrepreneurs-Continuous-Innovation/dp/0307887898">lean startup</a> people (*dev*ops*). I’m very interested in exploring if there’s any useful mileage in attempting to automate the <a href="http://en.wikipedia.org/wiki/PDCA">Deming Cycle</a>, and if there isn’t, to examine the reasons why.</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/PDCA_Cycle.svg/400px-PDCA_Cycle.svg.png" alt="" /></p>

<p>Humans are great for the <strong>PLAN</strong> (hypothesise) phase, although I’ve heard and read some interesting thoughts around AI and entropy being used to automate this (Skynet++).</p>

<p>Devops and the associated tooling are great for the <strong>DO</strong> phase, and the <a href="http://www.amazon.com/Continuous-Delivery-Deployment-Automation-Addison-Wesley/dp/0321601912">Continuous Delivery bible</a> has had a massive impact here.</p>

<p><strong>CHECK</strong> is often currently left either to chance or abstracted via some BI monstrosity. This is where I feel we need we may benefit from exploring automating assertions on business value. Most companies I work with have some capabilities around business metrics, but they’re infrequently linked back to the planning/strategic capabilities.</p>

<p>In theory an automated system can use some form of immunity metrics to roll back if the business assertions are not met, thus providing an element of automation around the <strong>ACT</strong> phase. I’ve seen a variety of immune systems employed around business metrics, however they often seem to be used as a tactical weapon rather than strategically to inform business decisions.</p>

<p>There are clear issues with attempting any kind of valid implementation, the obvious ones being around gaining useful feedback on a value proposition. From what I’ve looked at so far, automating value raises far more questions than it answers, but if we don’t push the boundaries on automating the feedback cycle then I feel we’re just locally optimising. I’ve had some really useful input from the folks at <a href="http://www.opencredo.com/">OpenCredo</a>, who are thinking along similar (but better formulated) lines, now I’m trying to actually make this concrete.</p>

<p>At the moment I’m working on extending cucumber, specifically on <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">“Lines 2-4 are unparsed text, which is expected to describe the business value of this feature”</a>. I’d like to change this, making the business value executable (and testable) so we can assert the business value is being delivered as promised.</p>

<p>I’d like to change this</p>

<pre><code>  Feature: Addition
    In order to avoid silly mistakes
    As a math idiot
    I want to be told the sum of two numbers
</code></pre>

<p>To this</p>

<pre><code>  Feature: Addition
    In order to make 0 silly mistakes
    As a math idiot
    I want to be told the sum of two numbers
</code></pre>

<p>Or this</p>

<pre><code>  Feature: Addition
    In order to make fewer silly mistakes
    As a math idiot
    I want to be told the sum of two numbers
</code></pre>

<p>And I want to assert that delivering this feature ensures the relative/absolute quantity of silly mistakes.</p>

<p>Attempting to write the code for this has made me realise how much time I&rsquo;ve wasted in meetings of late rather than making myself useful, so if you’d like to lend a hand on the implementation of these ideas, please get in contact. I’ll post on this blog when I get the proof of concept up on the <a href="https://github.com/hatofmonkeys">Githubs</a>.</p>

<p><strong>UPDATE</strong> Cucumber-value has now been dragged kicking and screaming on to <a href="https://rubygems.org/gems/cucumber-value">Rubygems</a> and been inserted forcibly up those <a href="https://github.com/hatofmonkeys/cucumber-value">Githubs</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Devops Days]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2011/11/04/devops-days/"/>
    <updated>2011-11-04T14:35:00+00:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2011/11/04/devops-days</id>
    <content type="html"><![CDATA[<p>I had the good fortune to attend <a href="http://devopsdays.org/events/2011-goteborg/">Devopsdays Goteborg</a> a few weeks back, and met a whole bunch of wonderful people. Many thanks to the legendary, words-cannot-do-this-man-justice <a href="http://www.jedi.be/">Patrick Debois</a> and the other organisers.</p>

<p>Whilst there seemed to be a lots of fantastic, enlightening conversation around the devops space, there also seemed to be a lot of complaints about lack of sponsorship for devops from those people in &ldquo;the business&rdquo;. I took my usual subtle, sensitive approach to a perceived problem and proposed an exploratory openspace entitled &ldquo;F**k devops, noone cares, where&rsquo;s my money?&rdquo;. Whilst I undermined myself somewhat by turning up late for my own openspace, my ideas didn&rsquo;t seem to get a huge amount of traction.</p>

<p><strong>&ldquo;The business case for devops&rdquo;</strong> (very faint on the board)</p>

<p><img src="http://farm7.static.flickr.com/6226/6312913863_7f3b6b8e6a.jpg"></p>

<p>This was probably because there was a tools-orientated openspace happening in another room.</p>

<p><img src="http://farm7.static.flickr.com/6101/6312937459_4295fa1ed0.jpg"></p>

<p>Devops&rsquo;s achilles heel is the potential it has for being introspective(ignore the ITIL/process arguments; absolute nonsense) and purely tooling focused. Changing the THEM and US attitude from dev vs ops to devops vs <a href="http://www.youtube.com/watch?v=3CiGUMQZUgU">THE MANAGEMENT</a> just shifts the issue. Patrick Debois brilliantly summarises that we should, instead, be thinking about <a href="http://www.slideshare.net/jedi4ever/devopsdays-downundervfinal">*dev*ops*</a>; unfortunately some of the devops people I&rsquo;ve met seem to be more interested in teaming up against others than including them.</p>

<p>I&rsquo;m taking a look at how I think we can address this problem, by perhaps changing the focus from &ldquo;delivering&rdquo; to &ldquo;delivering value&rdquo;. Coming from a devops background, I&rsquo;m obviously going to create a tool to help me. That should teach those management types a lesson.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Blogging With Octopress]]></title>
    <link href="http://blog.hatofmonkeys.com/blog/2011/10/25/blogging-with-octopress/"/>
    <updated>2011-10-25T23:21:00+01:00</updated>
    <id>http://blog.hatofmonkeys.com/blog/2011/10/25/blogging-with-octopress</id>
    <content type="html"><![CDATA[<p><a href="http://www.tumblr.com">Tumblr</a> seemed like an inappropriate place for my epic rants, so I&rsquo;m giving <a href="http://octopress.org/">Octopress</a> a go. Like the cool kids do.</p>
]]></content>
  </entry>
  
</feed>
