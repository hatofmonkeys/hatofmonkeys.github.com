
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hatofmonkeys</title>
  <meta name="author" content="Colin Humphreys">

  
  <meta name="description" content="1st January, Blog #8 Mutable State I enjoy attending developer-focused conferences &ndash; in particular QCon and GOTO &ndash; to talk to the real &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.hatofmonkeys.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hatofmonkeys" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26558043-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Hatofmonkeys</a></h1>
  
    <h2>Opinions on building platforms</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.hatofmonkeys.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/01/mutable-state/">Mutable State</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-01T13:03:00+00:00" pubdate data-updated="true">Jan 1<span>st</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">1st January, Blog #8</a></h2>

<h2>Mutable State</h2>

<p>I enjoy attending developer-focused conferences &ndash; in particular <a href="http://www.qconferences.com/">QCon</a> and <a href="http://gotocon.com/">GOTO</a> &ndash; to talk to the real consumers of PaaS. I also attend infrastructure-orientated conferences as a consumer of IaaS. I was recently on the PaaS panel at the <a href="https://twitter.com/VirtualBlackCat/status/535433555271495680">Apache CloudStack Conference</a> when I made what seemed a bizarre statement to many in the audience: &ldquo;If your problem isn&rsquo;t mutable state then you&rsquo;re probably doing something wrong.&rdquo;. I&rsquo;m taking this opportunity to explain what I meant.</p>

<h3>Mutable state is the problem</h3>

<p>I&rsquo;ve actually been making statements in this vein for a long time. In my experience, when delivering solutions, you can usually find a <em>correct</em> answer to your problem, given time to research and engineer sufficiently. The majority of optimisation problems have occurred when I&rsquo;ve been facing issues related to mutable state. These generally involve functions related to latency, consistency, availability and performance. <a href="http://en.wikipedia.org/wiki/CAP_theorem">CAP theorum</a> is perhaps the most frequently occurring; choose availability or consistency in the face of network partitions in a distributed system. You cannot have both.</p>

<h3>Development</h3>

<p>Approaches to mutable state vary across programming paradigms. Object-orientated programming favours encapsulating mutable state in objects; usually controlling concurrent access to the mutable data via mutexs or semaphores. In my experience this can lead to heavy performance issues when scaling. Functional programming favours having no mutable state; instead passing immutable values between functions. This causes different issues as it shifts the burden to the developer to model their data &ndash; in what can sometimes be an unnatural way.</p>

<h3>Infrastructure</h3>

<p>Mutable state in Infrastructure-as-a-Service can also cause issues. VMWare&rsquo;s various infrastructure offerings favour a consistent view of the infrastructure landscape, often using Oracle or MSSQL as an ACID-compliant database for consumers to rely upon. This makes the API easy to consume but difficult to scale to huge levels for producers. Consumers can rely on their mutations being immediately reflected across the API.</p>

<p>AWS EC2 offers an eventually consistent view of their landscape. This means EC2 can be delivered at a truly unprecedented scale but can cause issues for <a href="http://blog.cloudfoundry.org/2013/06/18/dealing-with-eventual-consistency-in-the-aws-ec2-api/">platform-level consumers</a>. Intelligence must be built into the tooling that consumes the API, as large consumers of EC2, such as Netflix, have done.</p>

<h3>Platform</h3>

<p>At a Platform-as-a-Service(PaaS) level we have tended to deal with the issue of mutable state by abdicating it to external services. Stateless application hosting is a done deal &ndash; <a href="https://twitter.com/swardley/status/527680598543187968">Cloud Foundry has won that battle</a>. Stateless application developers can choose to locate their data in whichever external service best suits the data; this is the polyglot approach embraced by PaaS. The real issues arise when we attempt to provide a Cloud-Foundry-like journey for developers and operators around stateful services.</p>

<p>An increasing number of PaaS developers appear to have become preoccupied with scheduling. Scheduler debates are so hot right now. No PaaS conference would be complete without an <a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/41684.pdf">Omega-style optimistic scheduler versus Mesos-style pessimistic scheduler conversation</a>. In my experience scheduling performance is rarely the constraint blocking PaaS adoption: the constraint is usually dealing with the necessary mutable state generated/consumed by the applications running in the PaaS.</p>

<h3>Two PaaSs to rule them all?</h3>

<p><a href="https://blog.openshift.com/chose-not-join-cloud-foundry-foundation-recommendations-2015">RedHat recently stated that dividing stateful and stateless services &ldquo;is an arbitrary distinction&rdquo;.</a> I don&rsquo;t agree with this perspective; I think it&rsquo;s a very important distinction. There are some key issues here &ndash; if an application container appears to have stopped functioning, what action should the PaaS take? If the container is stateless the PaaS can request a new container be started: potentially creating a duplicate. If the container is stateful the choice is more complicated. Should a new container be started, maximising service availability, but risking split-brain scenarios in a stateful environment? Should the container remain offline, reducing availability but ensuring data consistency? Should the container be restarted following a successful <a href="http://en.wikipedia.org/wiki/Fencing_%28computing%29">fencing</a> operation? What does fencing look like in a distributed, scheduled, containerised PaaS environment? These questions may lead to a separate breed of stateful PaaSs emerging focusing on stateful concerns, even if they share similar-looking APIs.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cf push mysql/mysql --disk 500 --restart-policy consistent  --disk-sync immediate --io-performance high
</span><span class='line'>cf push redis/redis --disk 100 --restart-policy available --disk-sync defer --io-performance medium</span></code></pre></td></tr></table></div></figure>


<h3>BOSH</h3>

<p>The &ldquo;Two PaaS&rdquo; debate has led to some people perceiving Cloud Foundry as a stateless PaaS and BOSH as a stateful PaaS. I believe this is an incorrect interpretation. I think BOSH is a fantastic system &ndash; it has had a greater influence on me than Cloud Foundry itself &ndash; but it is not a PaaS. BOSH is the purest embodiment of the principles of Infrastructure as Code: it fires up metal, lays down code, and attaches disks for state. It is not, in its current form, a scheduler in the manner of Mesos/Omega. BOSH is the world&rsquo;s best deployer of schedulers and distributed systems. A stateful PaaS would look more like <a href="https://github.com/cloudfoundry-incubator/diego-release">Diego</a>/<a href="https://github.com/pivotal-cf-experimental/lattice">Lattice</a>, modified to address the concerns above. BOSH would be a great way to deploy this new PaaS.</p>

<p><a href="https://www.youtube.com/watch?v=hQilwacuBO0">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/31/multi-site-cloud-foundry/">Multi-Site Cloud Foundry</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-31T10:20:00+00:00" pubdate data-updated="true">Dec 31<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">31st December, Blog #7</a></h2>

<h2>Multi-Site Cloud Foundry</h2>

<p><a href="http://www.cloudcredo.com/">CloudCredo&rsquo;s</a> clients often ask about how to run Cloud Foundry across multiple sites for performance and resilience. This is a natural question to ask: as an application developer, if I specify that I need to have ten instances of my application available, I expect ten instances to be available &ndash; whether the underlying infrastructure is available or not. The Platform-as-a-Service(PaaS) abstraction implies that my application should continue to run as desired, and that the PaaS should be designed to handle failures in the infrastructure layer.</p>

<h3>Choosing a CAP</h3>

<p>This idea sounds great in theory but can lead to some problems in practice. What should Cloud Foundry do, as a distributed system, in the event of a network partition? Should each partition converge on the desired state of the whole system, leading to twice the number of applications being online, and potential split-brain issues with singleton applications? Should the whole Cloud Foundry shut down to ensure application consistency? The key point to note here, which is not immediately obvious, is that whilst Cloud Foundry hosts <em>stateless</em> applications, it is actually a <em>stateful</em> system itself. This means <a href="http://en.wikipedia.org/wiki/CAP_theorem">CAP theorem</a> must be obeyed; we can opt for consistency or availability in our Cloud Foundry deployment.</p>

<p>Cloud Foundry has, at its core, a Cloud Controller database maintaining the desired state of the system. If we maintain a single, consistent state of this database we will be running a CP(consistent, partition-tolerant) Cloud Foundry. If we allow multiple, divergent copies of this database we will be running an AP(available, partition-tolerant) Cloud Foundry.</p>

<h3>Consistent Cloud Foundry</h3>

<p>Cloud Foundry&rsquo;s current engineering direction seems to favour a consistent view of the desired application state. This is exhibited by the choice of <a href="http://en.wikipedia.org/wiki/Raft_%28computer_science%29">Raft</a> as a consensus algorithm, and <a href="https://github.com/coreos/etcd">Etcd</a> as an implementation, for CF&rsquo;s next generation <a href="https://github.com/cloudfoundry-incubator/diego-release">Diego</a> components. These choices pose some difficult questions:</p>

<ul>
<li>Do we suffer thundering herd issues in the event of a network partition, where all desired instances of all applications attempt to run on the nodes with access to the quorate Etcd partition?</li>
<li>How do we ensure data services, required by the applications, are accessible from the functioning side of a partition?</li>
<li>How do we ensure latency to data services from across multiple sites does not reduce application performance below acceptable levels?</li>
<li>What happens if the Cloud Foundry components themselves experience issues, degrading the service as a whole across all sites?</li>
</ul>


<p>Running a consistent Cloud Foundry makes application deployment and management very easy; there is a single API endpoint for management. At CloudCredo we deploy consistent Cloud Foundry installations across multiple availability zones within a single region. This mitigates the latency concerns and provides a convenient management structure for application deployment.</p>

<h3>Available Cloud Foundry</h3>

<p>When I&rsquo;ve needed to deploy Cloud Foundry across multiple regions it has usually been to provide for a very high availability service level. To provide for this I have deployed multiple, completely separate Cloud Foundry installations, often on heterogeneous infrastructure providers, in diverse regions. An example of this kind of installation would be the <a href="http://blog.cloudfoundry.org/2013/04/30/uk-charity-raises-record-donations-powered-by-cloud-foundry/">donations platform for Comic Relief</a>. The huge benefit of this strategy is that no outages in any individual Cloud Foundry can stop the service &ndash; availability is maximised. The two major downsides are that deployment and orchestration of applications becomes significantly more complex, and that the applications and data services need to be developed to handle being deployed in a distributed system of this nature.</p>

<h3>The Perfect Cloud Foundry?</h3>

<p>I&rsquo;m currently deploying multi-zone &lsquo;consistent CF&rsquo; &ndash; and then multi-region &lsquo;available CF&rsquo; if requirements demand it. This is a domain specific choice; and it takes a significant amount of work in the application(particularly around state) to bring multi-region availability.</p>

<p><a href="https://www.youtube.com/watch?v=RQLQ7W2RoKA">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/30/paasaap-and-the-distro-wars/">PaaSaaP and the Distro Wars</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-30T08:37:00+00:00" pubdate data-updated="true">Dec 30<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">30th December, Blog #6</a></h2>

<h2>PaaSaaP and the Distro Wars</h2>

<p><a href="https://twitter.com/swardley/status/527680598543187968">Cloud Foundry has won the PaaS war</a>. Heroku blazed the trail with their PaaS for <a href="http://12factor.net/">Twelve-Factor Apps</a>, and VMWare/Pivotal have built an open-source implementation and ecosystem to provide both enterprises and developers with an obvious choice. Buildpacks have become the standard for translation from application code to runnable unit.</p>

<p>The question is rapidly changing from &ldquo;which PaaS are you using?&rdquo; to &ldquo;which distribution of Cloud Foundry are you using?&rdquo;. Just as Hadoop became synonymous with big data so Cloud Foundry has become PaaS. The emerging battle is between the distribution vendors; Pivotal, IBM, HP and ActiveState already have offerings in the market. I&rsquo;m sure we&rsquo;ll see more from other players as the <a href="http://www.cloudfoundry.org/about/index.html">Cloud Foundry Foundation</a> gains momentum.</p>

<p>The other fascinating aspect of the development of the Cloud Foundry ecosystem is &lsquo;Platform as a Service&rsquo; versus &lsquo;Platform as a Service as a Product&rsquo;(PaaSaaP). Some vendors are offering Cloud Foundry as installable, supported software &ndash; where the onus is on the customer to deploy the software to their chosen infrastructure in order to provide a service. Other vendors are deploying and running Cloud Foundry on behalf of their uses to provide a true PaaS experience. A few vendors are offering both. Some PaaS purists have denigrated Cloud Foundry for offering this flexibility, but I see this as one of Cloud Foundry&rsquo;s greatest strengths. Developers can minimise Time-to-Value by deploying quickly to a vendor&rsquo;s cloud-based solution &ndash; and then deploy Cloud Foundry to their own infrastructure when non-functional requirements emerge to make a custom deployment necessary.</p>

<p>We will also see domain-specific Cloud Foundy implementations for particular markets. The &lsquo;core&rsquo; Cloud Foundry specification, provided by the CF Foundation, will provide a key set of capabilities and an API for developers to work against &ndash; but we will see extensions providing for additional requirements and innovation. Time will tell which flavours of Cloud Foundry are successful and which are left behind.</p>

<p><a href="https://www.youtube.com/watch?v=iWRSOtAKcMY">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/29/twelve-factor-enterprise/">Twelve Factor Enterprise</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-29T10:16:00+00:00" pubdate data-updated="true">Dec 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">29th December, Blog #5</a></h2>

<h2>Twelve Factor Enterprise</h2>

<p>The big paradigm shift for developers using Platform-as-a-Service(PaaS) is understanding <a href="http://12factor.net/">&ldquo;The Twelve-Factor App&rdquo;</a>; a set of patterns developed by the team at Heroku enabling applications to be orchestrated and distributed at scale. By adopting these patterns developers can take advantage of PaaS, via services such as Heroku and Cloud Foundry, reducing their operational responsibilities so they can focus on delivering value.</p>

<p>I&rsquo;ve had a long-running debate with various members of the PaaS community about 12-Factor&rsquo;s relevance to enterprises. I&rsquo;ve heard many claims that enterprises don&rsquo;t want to adopt these patterns, and would rather mix their state, config, and application together as a tangled ball of mud. At a board level the enterprises I&rsquo;ve worked for, and interacted with, have been seeking organisational agility &ndash; the kind of fast delivery and iteration PaaS brings to software development. Somehow this message often gets lost in middle management, leading to a resistance to change and clinging to legacy practices like a safety blanket.</p>

<p>We need to stop telling enterprises that modern patterns, such as 12 Factor and Microservices, won&rsquo;t work for them. We need to help enterprises to lower their time-to-value and increase their operational efficiency. The only winners from keeping enterprises stuck in the dark ages are the incumbent vendors, happy to continue charging extortionate prices for outdated systems and software.</p>

<p>Enterprises can adopt 12 Factor, Microservices, and PaaS. They want to be more agile, not less. Let&rsquo;s help them.</p>

<p><a href="https://www.youtube.com/watch?v=koZeLiJdvJk">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/28/containers-as-a-service/">Containers as a Service</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-28T09:43:00+00:00" pubdate data-updated="true">Dec 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">28th December, Blog #4</a></h2>

<h2>Containers as a Service</h2>

<p>At a simple level, Infrastructure-as-a-Service deals with virtual machines, Platform-as-a-Service deals with applications, and Software-as-a-Service deals with users. I&rsquo;ve <a href="http://blog.docker.com/2014/07/dockercon-video/">spoken a few times</a> about Containers-as-a-Service(CaaS) &ndash; the idea that containers will become a new meaningful unit of currency in cloud computing. I&rsquo;ve also <a href="http://www.cloudcredo.com/pulling-paas-to-pieces/">written about the ramifications of CaaS for PaaS</a>.</p>

<p>The hottest debate in the container ecosystem seems to be whether to use containers as single processes or multi-process virtual machines. The Docker folks seem to encourage the use of single process containers &ndash; a view I&rsquo;m supportive of, following principles from software development, such as single responsibility and inversion of control. The alternative approach is to use containers as virtual machines with many processes. The virtual machine approach seems to resonate well with the current generation of operating systems and configuration management tooling.</p>

<p>I believe both approaches will continue to thrive for some time. The true value in Docker lies in the packaging and portability of containers, and this holds true whether you&rsquo;re packaging filesystems for a single process or a number of processes. Containers used as virtual machines will quickly erode the IaaS market &ndash; if only for their portability, speed, and density. Consumers and producers can gain benefits when choosing the CaaS abstraction over IaaS.</p>

<p>Over time there will be a move towards per-process containers, away from virtual machine-like containers, as the deployment and orchestration benefits from this approach become clearer. Just as SOLID, and TDD took time to gain momentum in software development so the correct patterns for containers will gain traction over time.</p>

<p>We will also see increasing numbers of customised operating systems, designed to run with the Linux kernel but providing a subset of the functionality, tuned for single-purpose containers. <a href="http://osv.io/">OSv</a> is a great example of this. I also think we&rsquo;re likely to see an increasing number of container host OSs, presenting something that looks like a Linux kernel to hosted containers, under development. The boundaries between hypervisor and namespaced kernel will blur.</p>

<p>The other main areas for innovation will be storage and networking. Providing containers with reliable storage for mutable state is challenging. The ClusterHQ folks have made great progress in this area using ZFS-on-Linux in <a href="https://github.com/clusterhq/flocker">Flocker</a>. There are also exciting developments in the networking space from <a href="http://socketplane.io/">SocketPlane</a> and <a href="https://github.com/zettio/weave">Weave</a> &ndash; simplifying multi-host container networking.</p>

<p>CaaS solutions have already emerged from the big cloud players; you can easily host containers on GCE, AWS, and Azure. <a href="http://www.rancher.io/">Rancher</a> looks to enable CaaS on any infrastructure. Pivotal&rsquo;s <a href="https://github.com/pivotal-cf-experimental/lattice">Lattice</a> enables operators to deliver their own CaaS, as does its big brother Cloud Foundry. These solutions are currently largely focused towards Docker but I&rsquo;m sure we&rsquo;ll see Rocket and alternatives emerge.</p>

<p>Whilst the future may look bright for containers, there are some warning signs. Multi-tenant container isolation and security are currently far from production ready. It also seems that choosing a layered filesystem beneath your containers can be a risky business; I&rsquo;ve been bitten by few bugs.</p>

<p>I think CaaS will grow exponentially over the next few years. <a href="https://www.tutum.co/">Tutum</a> are building the first pure CaaS I&rsquo;ve seen. They attracted $2.65M in seed funding this year. I&rsquo;m sure they&rsquo;ll have plenty of competition in the near future.</p>

<p><a href="https://www.youtube.com/watch?v=02KRAshCG0w">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/27/the-heterogeneous-workforce/">The Heterogeneous Workforce</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-27T10:20:00+00:00" pubdate data-updated="true">Dec 27<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">27th December, Blog #3</a></h2>

<h2>The Heterogeneous Workforce</h2>

<p>I enjoy regularly visiting and speaking at tech conferences. They&rsquo;re a great way to stay abreast of trends and keep a fresh perspective on how the industry is delivering value. Unfortunately I&rsquo;m usually dismayed at the homogeneous composition of the conference attendees; the overwhelming majority are white males, like myself.</p>

<p>As a company CEO I see this as a tremendous waste. The key role I play in the company is the recruitment and retention of the members of our great team. Enlarging the pool of resource I can draw from will only increase the quality of the team, the diversity of opinions, and create a balanced working environment. I&rsquo;m not trying to get on my moral high horse; I want a better team so I can make more money.</p>

<p>If you&rsquo;re interested in PaaS, distributed systems, and Extreme Programming, please do contact <a href="http://www.cloudcredo.com/contact-us/">CloudCredo</a> &ndash; especially if you don&rsquo;t &lsquo;fit the mould&rsquo;. We&rsquo;re looking for fast learners and good communicators. I&rsquo;d love to think there&rsquo;s a pool of untapped skills out there I can use to help build our team. I can&rsquo;t promise to run the perfect company, but I can promise to try.</p>

<p><a href="https://www.youtube.com/watch?v=YYxbzdbKvPo">More Christmas UKG!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/26/cloud-foundry-summit-2014/">Cloud Foundry Summit 2014</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-26T08:39:00+00:00" pubdate data-updated="true">Dec 26<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">26th December, Blog #2</a></h2>

<p>I wrote this blog back in June but didn&rsquo;t have time to publish it. No time like the present.</p>

<h2>Cloud Foundry Summit 2014</h2>

<p>Now the dust has settled following the CF Summit I thought it a good time to note some of the lasting impressions.</p>

<p>CF Summit was a great conference. The buzz and energy around the place was tangible. This year&rsquo;s host, Andrew Clay Shafer, gave the event a friendly, personable feel, and also has(had) great hair. The big hitters from the Cloud Foundry community were present, along with a newer users from a diverse range of organisations.</p>

<p>Personally, I felt the Summit represented the emergence of Cloud Foundry as the leading enterprise PaaS. I backed Cloud Foundry from day one, and I&rsquo;ve been vocal about the <a href="http://blog.hatofmonkeys.com/blog/2013/06/30/when-to-pass-on-a-paas/">shortcomings of other PaaSes that fall short of CF</a>. Witnessing some of the biggest names in tech queuing up to take the stage to endorse Cloud Foundry was immensely gratifying. The corollary to those endorsements was the quantity of real world Cloud Foundry success stories in the talks; Cloud Foundry has broken through, and proven its worth.</p>

<p>One of the chief reasons for the dramatic rise in enterprise adoption of Cloud Foundry has been the <a href="http://www.cloudcredo.com/cloudcredo-joins-the-cloud-foundry-foundation/">formation of the CF Foundation</a>. The Foundation members were well represented at CF Summit, from small innovators such as CloudCredo, to tech giants such as IBM and Cisco. It&rsquo;s fantastic to see the Cloud Foundry ecosystem crystallise as a Foundation to move the project forward.</p>

<p>The noticeable trend amongst the Summit attendees was big businesses realising the importance of speed. Canopy are shining example of this; formed from large enterprises but able to quickly and effectively <a href="http://canopy-cloud.com/">make use of outstanding new technologies</a>. I fear for their competition; it&rsquo;s striking when organisations decisively deliver capability at this scale.</p>

<p>We were overjoyed with the Summit from a CloudCredo perspective. The ecosystem&rsquo;s response to our work with them was fantastic. We are proud our work was mentioned in the following talks:</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=hy_huSXghI8">Ben Hale&rsquo;s Buildpack Talk</a></li>
<li><a href="https://www.youtube.com/watch?v=eQhRl9GYGpQ">Warner Music</a></li>
<li><a href="https://www.youtube.com/watch?v=YMNt6Gn3yaI">Canopy</a></li>
<li><a href="https://www.youtube.com/watch?v=2e0XgGevKhg">Cisco</a></li>
<li>James Bayer &ndash; Cloud Foundry Roadmap</li>
<li>Tammer Saleh and Chris Brown &ndash; Cloud Foundry Data Services</li>
<li><a href="https://www.youtube.com/watch?v=nmapwrs2M9c">Ferdy&rsquo;s BOSH/Docker talk</a></li>
<li><a href="https://www.youtube.com/watch?v=IP0fpP_Nl4I">My Decker talk</a></li>
</ul>


<p>We&rsquo;d love to be able to add your organisation&rsquo;s name to that list. Please <a href="http://www.cloudcredo.com/contact-us/">get in contact</a> to talk about how we can help you deliver with Cloud Foundry.</p>

<p><a href="https://www.youtube.com/watch?v=8CFESsXwntk">Christmas Garage!</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/25/the-twelve-blogs-of-christmas/">The Twelve Blogs of Christmas</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-25T12:19:00+00:00" pubdate data-updated="true">Dec 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">25th December, Blog #1</a></h2>

<h3>Twelve blogs, twelve days</h3>

<p>I&rsquo;ve got a backlog of half-formed blog posts (backblog?) that have been hanging around, like bad smells, for a while. I&rsquo;ve decided to get them all done and out over Christmas. I&rsquo;m cheating by imposing the following restrictions:</p>

<ul>
<li>This is the first blog and counts as a blog post even though it&rsquo;s a meta-post</li>
<li>I reserve the right to post days, or even weeks, late. I&rsquo;m in <a href="http://en.wikipedia.org/wiki/Sark">Sark</a> for some of Christmas and I will be burned alive in a <a href="http://en.wikipedia.org/wiki/The_Wicker_Man_%281973_film%29">wicker man</a> if I&rsquo;m seen using a laptop</li>
<li>I reserve the right to post nonsense due to Christmas-related alcohol abuse</li>
<li>I reserve the right to blame alcohol for nonsense I&rsquo;ve posted while sober</li>
<li>I have about eight posts lined up, most of which are nonsense</li>
<li>The remaining three posts are TBC and are guaranteed to be nonsense</li>
<li>I reserve the right to edit/delete all blogs at a later date once I realise how nonsensical they are</li>
</ul>


<h3>Random asides</h3>

<p>I&rsquo;ve noticed the vast majority of my traffic is from the USA. As part of my single-handed mission to bring back UK Garage, and further its influence in the world, I will be linking to some of the UKG greats at the end of each blog post.</p>

<p><a href="https://www.youtube.com/watch?v=vEtWdI9FByA">Bo selecta!</a></p>

<p>Let the blogging commence!</p>

<h3>Articles</h3>

<ol>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/25/the-twelve-blogs-of-christmas/">The Twelve Blogs of Christmas</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/26/cloud-foundry-summit-2014/">Cloud Foundry Summit 2014</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/27/the-heterogeneous-workforce/">The Heterogeneous Workforce</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/28/containers-as-a-service/">Containers as a Service</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/29/twelve-factor-enterprise/">Twelve Factor Enterprise</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/30/paasaap-and-the-distro-wars/">PaaSaaP and the Distro Wars</a></li>
<li><a href="http://blog.hatofmonkeys.com/blog/2014/12/31/multi-site-cloud-foundry/">Multi-Site Cloud Foundry</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/03/docker/">Docker, Investors, and Ecosystems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-03T09:13:00+00:00" pubdate data-updated="true">Dec 3<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Rocket</h3>

<p>As you&rsquo;re probably aware by now &ndash; CoreOS have released a new container runtime called &lsquo;<a href="https://coreos.com/blog/rocket/">Rocket</a>&rsquo;. Rocket will inevitably be perceived as a reaction, and competitor, to Docker. The language in CoreOS&rsquo;s Rocket blog post suggests Docker have deviated from CoreOS&rsquo;s preferred path, and the tone suggests an accusation of betrayal. The timing of CoreOS&rsquo;s announcement, the week before DockerCon EU, implies a deliberate attempt to undermine Docker&rsquo;s marketing.</p>

<h3>Reaction</h3>

<p>GigaOM have published a great summary of the community&rsquo;s reaction <a href="https://gigaom.com/2014/12/02/why-coreos-just-fired-a-rocket-at-docker/">here</a>. Given Docker&rsquo;s amazing ecosystem and adoption levels I&rsquo;m actually quite surprised more people haven&rsquo;t come out in strong support of Docker. Solomon Hykes has exactly three things to say (followed by a subsequent thirteen) <a href="https://news.ycombinator.com/item?id=8682525">here</a>.</p>

<h3>The Changing Docker</h3>

<p>I spoke at <a href="http://blog.docker.com/2014/07/dockercon-video/">DockerCon 2014 about the Cloud Foundry/Docker integration</a> project I&rsquo;d been working on. This work has now been subsumed into the <a href="https://www.youtube.com/watch?v=e76a50ZgzxM">Docker on Diego</a> work which is beginning to form the core of Cloud Foundry V3. While working on the initial proof of concept I had regular communication with the people at Docker. I found them friendly and open to the idea of using Docker containers as another deployable unit within Cloud Foundry.</p>

<p>Once Docker <a href="http://thenewstack.io/docker-sets-sights-on-enterprises-with-40-million-investment/">raised their $40M investment</a> the tone changed. Docker became a &lsquo;<a href="https://www.docker.com/whatisdocker/">platform</a>&rsquo;. Docker&rsquo;s collaboration with Cloud Foundry, to use Docker inside Cloud Foundry, <a href="https://docs.google.com/document/d/1IBfDDnn_Kr0_P8iUubHX3RdvGxQ9isXczhjLW3pMZiM/pub">seemed to stall</a>. It appeared Docker were trying to eat their ecosystem. Was investor pressure for a huge return causing Docker to try to capture too many markets rather than focusing on their core?</p>

<h3>Cloud Foundry Future</h3>

<p>Cloud Foundry will continue to orchestrate various units of currency; applications via buildpacks, containers via Docker, and potentially containers via Rocket. My company, <a href="http://www.cloudcredo.com/">CloudCredo</a>, is already looking at what a Rocket integration with Cloud Foundry would look like. <code>cf push https://storage-mirror.example.com/webapp-1.0.0.aci</code> is on the way.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/15/configuration-management-isnt-stupid/">Configuration Management isn&#8217;t Stupid, but it Should Be</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-15T10:37:00+00:00" pubdate data-updated="true">Mar 15<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Devops is about holistic, systems-orientated thinking; it&rsquo;s been misappropriated to be about configuration management. I&rsquo;ve noticed a decline in the number of people from a development background at Devops conferences &ndash; maybe they&rsquo;ve lost interest in talking about Puppet vs Chef vs Salt vs Ansible vs CFEngine vs X vs Y vs Z?</p>

<h3>Bricks</h3>

<p>The role of infrastructure should be to provide reliable, consumable bricks to enable innovation at higher levels. If we create beautiful, unique, novel bricks it becomes impossible to build houses. This is a problem I see regularly with OpenStack deployments; they&rsquo;re amazing, wonderful, unique, organic. I cannot, however, easily deploy platforms to them.</p>

<h3>Configuration Management</h3>

<p>This issue manifests itself in deployments orchestrated by configuration management.</p>

<ul>
<li>Complexity &ndash; you can do some amazing things in Chef as you have the power and flexibility to run arbitrary Ruby during your deployments. I have seen this abused many times &ndash; and done this myself. Too much clever branching logic and too little reliable code</li>
<li>Determinism &ndash; configuration management tools often provide a thin veneer over non-deterministic operating system commands</li>
<li>Reproducibility &ndash; server scaling operations often fail due to poor dependency management and non-deterministic actions</li>
</ul>


<p>Configuration management is too focused on innovation at the server level rather than thinking about the entire system. Devops has become a silo.</p>

<h3>A Better Way</h3>

<p>There are some tools and patterns emerging to tackle these problems.</p>

<ul>
<li><a href="http://foodfightshow.org/2013/07/immutable-infrastructure.html">Immutable infrastructure</a> &ndash; remove the drift</li>
<li><a href="https://www.docker.io/">Docker</a>/<a href="https://www.youtube.com/watch?v=QslNszh3jfY">Decker</a> &ndash; testable, simple, small, disposable containers</li>
<li><a href="http://nixos.org/nix/">Nix</a> &ndash; declarative, deterministic package management</li>
<li><a href="https://github.com/cloudius-systems/osv">OSV</a> &ndash; stupid(brilliant) operating system to enable innovation</li>
<li><a href="http://bosh.cfapps.io/">BOSH</a> &ndash; stupid(brilliant) tool to deploy complex distributed systems</li>
<li><a href="http://mesos.apache.org/">Mesos</a> &ndash; schedule commands(jobs) to run in a distributed environment</li>
</ul>


<h3>&lsquo;Infrastructure as Code&rsquo; to &lsquo;Infrastructure as Good Code&rsquo;</h3>

<p>We need <a href="http://www.codeproject.com/Articles/60845/The-S-O-L-I-D-Object-Oriented-Programming-OOP-Prin">SOLID</a> for infrastructure. We need to develop standardised, commoditised, loosely coupled, single-responsibility components from which we can build higher-order systems and services. Only then will we be enabling innovation higher up the value chain.</p>

<p>Devops should be about enabling the business to deliver effectively. We&rsquo;ve got stuck up our own <del>arses</del> configuration management.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/01/mutable-state/">Mutable State</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/31/multi-site-cloud-foundry/">Multi-Site Cloud Foundry</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/30/paasaap-and-the-distro-wars/">PaaSaaP and the Distro Wars</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/29/twelve-factor-enterprise/">Twelve Factor Enterprise</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/28/containers-as-a-service/">Containers as a Service</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/hatofmonkeys">@hatofmonkeys</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hatofmonkeys',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/hatofmonkeys?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/hatofmonkeys">My Delicious Bookmarks &raquo;</a></p>
</section>



<section>
  <h1>Twitter</h1>
  <a class="twitter-timeline" href="https://twitter.com/hatofmonkeys" data-widget-id="351933447830396928">Tweets by @hatofmonkeys</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Colin Humphreys -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'hatofmonkeysblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>







</body>
</html>
